<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Park Page</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

</head>
<body>

<nav class="navbar navbar-expand-lg bg-body-tertiary shadow-lg" data-bs-theme="dark">
    <div class="container-fluid justify-content-center">
        <a class="navbar-brand fw-bold"><i class="bi bi-car-front-fill text-primary fw-bold"></i>&nbsp;&nbsp;Controle de Estacionamento</a>
    </div>
</nav>
<div class="d-flex justify-content-center flex-wrap" style="padding: 1%">

    <div class="card text-bg-danger mb-3 shadow-lg" style="width: 18rem; margin-left: 1%;" th:each="veiculo : ${veiculo}">
        <div class="card-header text-center" th:if="${veiculo.tipo} == 'Carro'"><i class="bi bi-car-front-fill text-light fw-bold">&nbsp;&nbsp;</i>Vaga Indisponível</div>
        <div class="card-header text-center" th:if="${veiculo.tipo} == 'Moto'"><i class="bi bi-bicycle fw-bold">&nbsp;&nbsp;</i>Vaga Indisponível</div>
        <div class="card-body text-center" th:id="'vagaId_' + ${veiculo.vagaId}">
            <h5 class="card-title text-center fw-bold" th:text="'Placa: ' + ${veiculo.placa}"/>
            <span class="card-text fst-italic" th:text="'Veículo: ' + ${veiculo.tipo}"></span><p>
            <span class="card-text fst-italic" th:text="'Fabricante: ' + ${veiculo.fabricante}"></span><br>
            <span class="card-text fst-italic" th:text="'Modelo: ' + ${veiculo.modelo}"></span><br>
            <span class="card-text fst-italic" th:text="'Tempo: ' + ${veiculo.permanencia}"></span>
            <br><br>
            <a class="btn btn-dark border-info" href="#" style="width:100%">Desocupar</a>

        </div>
    </div>

    <script th:inline="javascript">
        for(let i = 1; i < 16; i++) {
            document.write("<div class=\"card text-bg-success mb-3\" id=vagaDispId_"+i+" style=\"width: 18rem; margin-left: 1%;\">\n" +
                "        <div class=\"card-header text-center\"><i class=\"bi bi-check2-circle\"></i>&nbsp;&nbsp;Vaga "+i+" Disponível </div>\n" +
                "        <div class=\"card-body text-center\">\n" +
                "            <br>\n" +
                "            <i class=\"d-flex justify-content-center display-1 bi bi-p-circle\"></i>\n" +
                "            <br>\n" +
                "            <br>\n" +
                "           <button class=\"d-flex justify-content-center btn btn-dark border-info\" value="+i+" style=\"width:100%;\">Estacionar</button>\n" +
                "        </div>\n" +
                "    </div>");

            if(document.getElementById("vagaId_"+i)){
                document.getElementById("vagaDispId_"+i).className = "card text-bg-success mb-3 visually-hidden";
            }
        }

        $("button").click(function(){
            var fired_button = $(this).val();
            sessionStorage.setItem("key", fired_button);
            window.location.href = "formEstacionar";
        });
    </script>
</div>
<!-- FIM DOS CARDS -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
</body>
</html>